# 2. 스레드 이해 및 관리 (운영체제)

---

### 스레드(Thread)란?

- 프로세스 내에서 실행되는 작업의 최소 단위  
- 여러 스레드가 하나의 프로세스 내에서 자원을 공유하며 병행 실행 가능  
- 주소 공간과 자원(코드, 데이터, 힙)은 공유, 각 스레드마다 독립적인 스택과 레지스터 보유  
- 스레드는 프로세스의 실행 흐름을 분리하여 동시성과 효율성을 개선  

---

### 스레드 메모리 구조

| 구분         | 공유 영역                  | 독립 영역        |
|------------|-------------------------|--------------|
| 코드 영역    | 공유                         | -            |
| 데이터 영역  | 공유                         | -            |
| 힙 영역     | 공유                         | -            |
| 스택 영역    | -                           | 스레드별 독립 |

- 스택은 함수 호출 시 인자, 반환 주소, 지역변수를 저장하기 때문에 스레드마다 별도 할당 필요  

---

### 스레드의 장점

- 자원 공유로 생성/전환 비용이 프로세스보다 적음  
- 멀티코어 환경에서 병렬 처리 가능  
- 응답성 향상, 리소스 활용 최적화  

---

### 스레드 파이썬 예제

import threading
import os

def thread_function():
print("프로세스 ID:", os.getpid())
print("스레드 ID:", threading.get_native_id())

if name == "main":
print("메인 프로세스 ID:", os.getpid())
thread = threading.Thread(target=thread_function)
thread.start()
thread.join()

text

---

### 실행 결과 예시

메인 프로세스 ID: 12345
프로세스 ID: 12345
스레드 ID: 140536832000000

text

- 메인 프로세스에서 스레드를 생성했으며, 스레드 ID와 동일한 프로세스 ID를 공유함

---

### 스레드 관리 및 구현 방식

- **사용자 수준 스레드(User-level Thread)**: 사용자 라이브러리에서 스레드 관리, 커널은 인지 못함  
- **커널 수준 스레드(Kernel-level Thread)**: OS가 직접 스레드 관리 및 스케줄링  
- **하이브리드 스레드**: 두 방식의 혼합 형태  

---

### 주의사항

- 스레드 간 동기화 문제(경쟁 상태, 데드락 등) 발생 가능  
- 동기화 기법(뮤텍스, 세마포어 등)을 통해 문제 해결 필요  

---