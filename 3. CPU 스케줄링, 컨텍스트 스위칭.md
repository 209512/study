# 3. CPU 스케줄링과 컨텍스트 스위칭 (운영체제)

---

### CPU 스케줄링이란?

- 여러 프로세스가 하나의 CPU를 공유하기 위해 사용 시간을 할당받는 프로세스 실행 순서 결정 과정  
- 효율적 CPU 이용과 공정성 확보가 목적  
- 스케줄링 유형: 장기, 중기, 단기 스케줄링으로 구분

---

### 스케줄링 유형

| 구분      | 역할 및 시기                                |
|----------|-----------------------------------------|
| 장기 스케줄링 | 어떤 프로세스를 메모리에 올릴지 결정 (프로세스 생성 시점) |
| 중기 스케줄링 | 메모리가 부족할 때 일부 프로세스를 디스크로 스왑아웃 결정    |
| 단기 스케줄링 | CPU를 어느 프로세스에 할당할지 실제 실행 시점에 결정       |

---

### 대표 스케줄링 알고리즘

| 알고리즘              | 설명                                        | 종류           |
|---------------------|-------------------------------------------|--------------|
| FCFS (First Come First Served) | 가장 먼저 준비 큐에 도착한 프로세스가 먼저 CPU 점유      | 비선점형       |
| SJF (Shortest Job First)        | 실행 시간이 가장 짧은 프로세스부터 CPU 할당           | 비선점형       |
| Priority Scheduling             | 우선순위 높은 프로세스가 우선 CPU 점유               | 선점형 / 비선점형 |
| Round Robin (RR)               | 각 프로세스에 일정 시간 할당 후 순환                     | 선점형        |
| 다단계 큐 / 다단계 피드백 큐    | 프로세스 특성에 따라 여러 큐로 분리, 큐별 스케줄링       | 선점형        |
| Linux CFS                      | 공정성 기반 완벽 공평 스케줄러                          | 선점형        |

---

### 컨텍스트 스위칭이란?

- 한 프로세스의 CPU 상태(레지스터, 프로그램 카운터 등)를 저장하고  
- 다른 프로세스의 상태를 복원하여 CPU 실행권을 넘겨주는 작업  
- CPU 활용 효율과 멀티태스킹 실현에 필수적이지만 오버헤드 존재  

---

### 단순 스케줄링 예제 (파이썬)

```python
from multiprocessing import Process
import os
import time

def task(name):
    print(f"{name} 프로세스 ID: {os.getpid()}")
    time.sleep(1)

if name == "main":
    p1 = Process(target=task, args=("프로세스1",))
    p2 = Process(target=task, args=("프로세스2",))
    p1.start()
    p2.start()
    p1.join()
    p2.join()

```

---

### 실행 결과 예시

```python
프로세스1 프로세스 ID: 2345
프로세스2 프로세스 ID: 2347

```

- 두 프로세스가 독립적으로 실행되며 각각 별도의 프로세스 ID를 갖는 것을 확인할 수 있음

---

### 스케줄링 선택 고려사항

- 부하 최소화 및 자원 효율성  
- 프로세스 대기 및 응답 시간 최적화  
- 시스템 안정성과 사용자 요구 조화  

---

### 추가 설명

- Windows OS: 우선순위 선점형 스케줄링 사용  
- Linux OS: Completely Fair Scheduler(CFS) 사용, 공평한 CPU 분배 우선  
